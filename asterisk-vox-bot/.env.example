# ==============================================================================
# КОНФИГУРАЦИЯ METROTECH VOICE AI ASSISTANT
# ==============================================================================
# Этот файл содержит примеры всех доступных переменных окружения.
# Скопируйте его в .env и настройте значения для вашего окружения.
# ==============================================================================

# ------------------------------------------------------------------------------
# ASTERISK ARI НАСТРОЙКИ
# ------------------------------------------------------------------------------
# URL для подключения к Asterisk REST Interface (ARI)
# Должен начинаться с http:// или https://
ARI_HTTP_URL=http://localhost:8088

# Учетные данные для авторизации в ARI
# Эти данные должны совпадать с настройками в /etc/asterisk/ari.conf
ARI_USERNAME=asterisk
ARI_PASSWORD=asterisk123

# Имя приложения Stasis, настроенное в Asterisk
# Должно совпадать с app в extensions.conf: Stasis(asterisk-bot)
ARI_APP_NAME=asterisk-bot

# ------------------------------------------------------------------------------
# REDIS НАСТРОЙКИ
# ------------------------------------------------------------------------------
# URL для подключения к Redis (используется для кэширования и сессий)
# Формат: redis://[host]:[port]/[db_number]
REDIS_URL=redis://localhost:6379/0

# ------------------------------------------------------------------------------
# ТАЙМАУТЫ И ПОРОГИ РАСПОЗНАВАНИЯ РЕЧИ
# ------------------------------------------------------------------------------
# Таймаут окончания речи (в секундах)
# Определяет, сколько секунд тишины нужно, чтобы считать фразу законченной
# Рекомендуемые значения: 0.2 - 1.0
# Меньше = быстрее реакция, но может обрезать речь
# Больше = надежнее, но медленнее реакция
SPEECH_END_TIMEOUT=0.2

# Максимальная длительность тишины (в секундах)
# После этого времени тишины звонок автоматически завершается
# Рекомендуемые значения: 5.0 - 30.0
MAX_SILENCE_DURATION=5.0

# ------------------------------------------------------------------------------
# ДОПОЛНИТЕЛЬНЫЕ НАСТРОЙКИ (существующие, для совместимости)
# ------------------------------------------------------------------------------
# Эти настройки пока остаются в старом формате и будут мигрированы позже

# API ключ для защиты административных эндпоинтов
# API_SECRET_KEY=your-secret-key-here

# Пути к файлам конфигурации
# PROMPTS_FILE_PATH=config/prompts.json
# KNOWLEDGE_BASE_PATH=kb/knowledge_base.md
# KNOWLEDGE_BASE2_PATH=kb/knowledge_base_tech.md

# LLM настройки
# LLM_MODEL_PRIMARY=gpt-4o-mini
# LLM_MODEL_FALLBACK=
# LLM_TEMPERATURE=0.2

# Настройки поиска в базе знаний
# KB_TOP_K=3
# KB_FALLBACK_THRESHOLD=0.2

# OpenAI API Key
# OPENAI_API_KEY=your-openai-api-key

# Yandex Cloud credentials (для ASR/TTS)
# YANDEX_FOLDER_ID=your-folder-id
# YANDEX_OAUTH_TOKEN=your-oauth-token
# YANDEX_IAM_TOKEN=your-iam-token

# Настройки детекции речи
# SPEECH_DETECTION_ENABLED=false
# SPEECH_DEBUG_LOGGING=false
# VAD_ENABLED=false
# BARGE_IN_GUARD_MS=400

# ==============================================================================
# TTS ОПТИМИЗАЦИЯ ПАРАМЕТРОВ ОЧЕРЕДИ (Task 3.3)
# ==============================================================================
# Параллелизм TTS - количество воркеров для параллельной генерации
# Рекомендуемые значения: 3-6 (увеличение уменьшает underrun'ы, но требует больше ресурсов)
# Динамически подстраивается при underrun'ах > 3
TTS_PARALLEL_WORKERS=4

# Время одного чанка речи в секундах
# Используется для расчета целевого размера буфера
CHUNK_STREAMING_SECONDS=5

# Размер буфера аудио (чанков)
# Минимум 2 чанка для буфера (избегаем underrun)
# Максимум 8 чанков (контроль задержки)
AUDIO_BUFFER_SIZE=2

# ==============================================================================
# КОНЕЦ ФАЙЛА .env.example
# ==============================================================================
