<!-- a542025b-e1a2-4844-9474-370c9770d469 201a36fa-7f87-45b2-b33e-f738d4e1e03e -->
# –ì–æ—Ä—è—á–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

FastAPI (main.py) –∏ stasis_handler —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö. –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–æ–º–ø—Ç–æ–≤ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å, FastAPI —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–∞–π–ª –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–≤–æ–π –∞–≥–µ–Ω—Ç, –Ω–æ stasis_handler –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –ø—Ä–æ–º–ø—Ç–∞–º–∏ –∏–∑ –ø–∞–º—è—Ç–∏.

## –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–∏—Ç—å —Ñ–æ–Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫ –≤ –∫–ª–∞—Å—Å `Agent`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤—Ä–µ–º—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ñ–∞–π–ª–∞ `prompts.json` –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å –ø—Ä–æ–º–ø—Ç—ã –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

## –®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`

–§–∞–π–ª: `/root/Asterisk_bot/asterisk-vox-bot/.env`

–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞ –Ω–æ–≤—É—é —Å–µ–∫—Ü–∏—é:

```bash
# HOT RELOAD –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
#__________________________________________________________________
# PROMPTS_HOT_RELOAD ‚Äî –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–æ–º–ø—Ç–æ–≤
PROMPTS_HOT_RELOAD=true
# PROMPTS_RELOAD_INTERVAL_SEC ‚Äî –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ–∞–π–ª–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
PROMPTS_RELOAD_INTERVAL_SEC=5
```

**–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–µ–∫—É–Ω–¥—ã –≤–º–µ—Å—Ç–æ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã, –∏ —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª (5 —Å–µ–∫—É–Ω–¥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏.

### 2. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å `Agent` 

–§–∞–π–ª: `/root/Asterisk_bot/asterisk-vox-bot/app/backend/rag/agent.py`

#### 2.1. –î–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã

–í –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞ (–ø–æ—Å–ª–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤):

```python
import threading
```

#### 2.2. –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–æ–¥ `__init__`

–ü–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–º–ø—Ç–æ–≤ (`self.prompts = self.load_prompts()`), –¥–æ–±–∞–≤–∏—Ç—å:

```python
# –ì–æ—Ä—è—á–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ (–¥–ª—è –∫—Ä–æ—Å—Å-–ø—Ä–æ—Ü–µ—Å—Å–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)
self.prompts_file_path = os.getenv("PROMPTS_FILE_PATH")
self._prompts_mtime = self._get_file_mtime(self.prompts_file_path) if self.prompts_file_path else -1.0
self._hot_reload_enabled = os.getenv("PROMPTS_HOT_RELOAD", "true").lower() == "true"
self._reload_interval = float(os.getenv("PROMPTS_RELOAD_INTERVAL_SEC", "5"))

if self._hot_reload_enabled and self.prompts_file_path:
    logger.info(f"üî• –ì–æ—Ä—è—á–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ –≤–∫–ª—é—á–µ–Ω–∞ (–∏–Ω—Ç–µ—Ä–≤–∞–ª: {self._reload_interval}—Å)")
    reload_thread = threading.Thread(target=self._watch_prompts_file, daemon=True, name="PromptsWatcher")
    reload_thread.start()
else:
    logger.info("‚ÑπÔ∏è  –ì–æ—Ä—è—á–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ –æ—Ç–∫–ª—é—á–µ–Ω–∞")
```

#### 2.3. –î–æ–±–∞–≤–∏—Ç—å –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã

–í –∫–æ–Ω–µ—Ü –∫–ª–∞—Å—Å–∞ `Agent` –¥–æ–±–∞–≤–∏—Ç—å:

```python
def _get_file_mtime(self, file_path: str) -> float:
    """–ü–æ–ª—É—á–∞–µ—Ç –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ñ–∞–π–ª–∞."""
    try:
        return os.path.getmtime(file_path)
    except Exception as e:
        logger.debug(f"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å mtime –¥–ª—è {file_path}: {e}")
        return -1.0

def _watch_prompts_file(self):
    """
    –§–æ–Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫: —Å–ª–µ–¥–∏—Ç –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ —Ñ–∞–π–ª–∞ –ø—Ä–æ–º–ø—Ç–æ–≤.
    –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤—ã–∑—ã–≤–∞–µ—Ç reload_prompts().
    """
    logger.info(f"üîç –ó–∞–ø—É—â–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ñ–∞–π–ª–∞ –ø—Ä–æ–º–ø—Ç–æ–≤: {self.prompts_file_path}")
    
    while True:
        try:
            time.sleep(self._reload_interval)
            
            current_mtime = self._get_file_mtime(self.prompts_file_path)
            
            if current_mtime > 0 and current_mtime != self._prompts_mtime:
                logger.info(f"üîÑ –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –ø—Ä–æ–º–ø—Ç–æ–≤, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º...")
                self.reload_prompts()
                self._prompts_mtime = current_mtime
                logger.info("‚úÖ –ü—Ä–æ–º–ø—Ç—ã —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ —Ñ–∞–π–ª–∞")
                
        except Exception as e:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –≤ –ø–æ—Ç–æ–∫–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–º–ø—Ç–æ–≤: {e}", exc_info=True)

def reload_prompts(self):
    """
    –Ø–≤–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–æ–º–ø—Ç–æ–≤ –±–µ–∑ –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –∞–≥–µ–Ω—Ç–∞.
    –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ —Ñ–æ–Ω–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –∏–ª–∏ FastAPI.
    """
    try:
        old_prompts = self.prompts.copy() if self.prompts else {}
        self.prompts = self.load_prompts()
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ –ø—Ä–æ–º–ø—Ç—ã –∏–∑–º–µ–Ω–∏–ª–∏—Å—å
        if old_prompts != self.prompts:
            logger.info("üìù –ü—Ä–æ–º–ø—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤ –ø–∞–º—è—Ç–∏ –∞–≥–µ–Ω—Ç–∞")
            return True
        else:
            logger.debug("‚ÑπÔ∏è  –ü—Ä–æ–º–ø—Ç—ã –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å")
            return False
            
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–æ–º–ø—Ç–æ–≤: {e}", exc_info=True)
        return False
```

#### 2.4. –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–µ—Ç–æ–¥ `reload()`

–ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä—è–º–æ–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ `self.prompts = self.load_prompts()` –Ω–∞ –≤—ã–∑–æ–≤ –Ω–æ–≤–æ–≥–æ –º–µ—Ç–æ–¥–∞:

```python
def reload(self):
    """–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø—Ä–æ–º–ø—Ç—ã, –≤–µ–∫—Ç–æ—Ä–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ RAG-—Ü–µ–ø–æ—á–∫—É."""
    logger.info("üîÉ –ü–æ–ª—É—á–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –Ω–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É –∞–≥–µ–Ω—Ç–∞...")
    try:
        self.reload_prompts()  # –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ load_prompts()
        # –û–±–Ω–æ–≤–∏–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –º–æ–¥–µ–ª–µ–π
        self.llm = self._create_llm_from_env(primary=True)
        self._initialize_rag_chain()
        logger.info("‚úÖ –ê–≥–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω —Å –Ω–æ–≤–æ–π –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π –∏ –ø—Ä–æ–º–ø—Ç–∞–º–∏.")
        return True
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ –∞–≥–µ–Ω—Ç–∞: {e}", exc_info=True)
        return False
```

### 3. –£–ª—É—á—à–∏—Ç—å –∞—Ç–æ–º–∞—Ä–Ω—É—é –∑–∞–ø–∏—Å—å –≤ FastAPI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–§–∞–π–ª: `/root/Asterisk_bot/asterisk-vox-bot/app/backend/main.py`

–î–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç:

```python
import tempfile
```

–û–±–Ω–æ–≤–∏—Ç—å endpoint `/api/prompts`:

```python
@app.post("/api/prompts", dependencies=[Depends(get_api_key)])
async def update_prompts(payload: PromptsUpdatePayload):
    prompts_file = os.getenv("PROMPTS_FILE_PATH")
    if not prompts_file:
        raise HTTPException(status_code=500, detail="–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è PROMPTS_FILE_PATH –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞.")
    try:
        data = payload.dict()
        
        # –ê—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–ø–∏—Å—å: temp file + rename
        dir_path = os.path.dirname(prompts_file) or "."
        os.makedirs(dir_path, exist_ok=True)
        
        with tempfile.NamedTemporaryFile(
            mode='w', 
            delete=False, 
            dir=dir_path, 
            prefix=".prompts_", 
            suffix=".tmp", 
            encoding='utf-8'
        ) as tf:
            json.dump(data, tf, ensure_ascii=False, indent=2)
            tf.flush()
            os.fsync(tf.fileno())
            tmp_path = tf.name
        
        # –ê—Ç–æ–º–∞—Ä–Ω—ã–π rename
        os.replace(tmp_path, prompts_file)
        
        # –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç FastAPI –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
        if agent and hasattr(agent, 'reload_prompts'):
            agent.reload_prompts()

        return JSONResponse(content={"message": "–ü—Ä–æ–º–ø—Ç—ã —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã."})
    except Exception as e:
        raise HTTPException(status_code=500, detail=f"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã: {e}")
```

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:

1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å systemd —Å–µ—Ä–≤–∏—Å –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞:
   ```bash
   sudo systemctl restart metrotech-bot
   ```

2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏, —á—Ç–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–ø—É—â–µ–Ω:
   ```bash
   sudo journalctl -u metrotech-bot -f | grep -E "(–ì–æ—Ä—è—á–∞—è|–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)"
   ```

3. –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

4. –í —Ç–µ—á–µ–Ω–∏–µ 5 —Å–µ–∫—É–Ω–¥ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ:
   ```bash
   sudo journalctl -u metrotech-bot -f | grep "–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º"
   ```

5. –ü–æ–∑–≤–æ–Ω–∏—Ç—å –±–æ—Ç—É –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–µ –ø—Ä–æ–º–ø—Ç—ã

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
- –†–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω–æ –≤ –∫–∞–∂–¥–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç Redis –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –≤–Ω–µ—à–Ω–∏—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ `.env` –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–ø–∏—Å—å —Ñ–∞–π–ª–∞
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–∏—Å—Ç–µ–º—É

## –†–∏—Å–∫–∏ –∏ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- –§–æ–Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ daemon, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
- –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è, –Ω–æ –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç —Ä–∞–±–æ—Ç—É –∞–≥–µ–Ω—Ç–∞
- –ü—Ä–∏ –æ—à–∏–±–∫–µ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞ —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ–º–ø—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏
- –ê—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–ø–∏—Å—å –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —á—Ç–µ–Ω–∏–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

### To-dos

- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ PROMPTS_HOT_RELOAD –∏ PROMPTS_RELOAD_INTERVAL_SEC –≤ .env —Ñ–∞–π–ª
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç threading –≤ agent.py
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≥–æ—Ä—è—á–µ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –≤ –º–µ—Ç–æ–¥ __init__ –∫–ª–∞—Å—Å–∞ Agent
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã _get_file_mtime, _watch_prompts_file –∏ reload_prompts –≤ –∫–ª–∞—Å—Å Agent
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–µ—Ç–æ–¥ reload() –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ reload_prompts()
- [ ] –£–ª—É—á—à–∏—Ç—å –∞—Ç–æ–º–∞—Ä–Ω—É—é –∑–∞–ø–∏—Å—å —Ñ–∞–π–ª–∞ –≤ FastAPI endpoint /api/prompts
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å systemd —Å–µ—Ä–≤–∏—Å –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≥–æ—Ä—è—á—É—é –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É